<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>用户登录</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link href="https://unpkg.com/bootstrap-table@1.15.3/dist/bootstrap-table.min.css" rel="stylesheet">
    <script src="https://unpkg.com/bootstrap-table@1.15.3/dist/bootstrap-table.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap-table/1.15.3/locale/bootstrap-table-zh-CN.js"></script>
    <script src="https://cdn.bootcss.com/jquery.form/4.2.2/jquery.form.min.js"></script>
    <script src="https://cdn.bootcss.com/moment.js/2.19.4/moment-with-locales.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>
</head>
<body>
<form id="form1" class="form-horizontal" role="form" style="margin-left:500px;margin-top:100px;width: 400px;" action="/doregister" method="post">
    <div class="form-group" style="width: 400px;">
         <label for="username" stype="display:inline;width:100px">账　　户：</label>
         <input type="text" class="form-control" id="username" name="username" style="display:inline;width:300px;" placeholder="请输入用户名"/>
    </div>
    <div class="form-group" style="width: 400px;">
        <label for="password" style="display:inline;width:100px">密　　码：</label>
        <input type="text" class="form-control" id="password" name="password" style="display:inline;width:300px;" placeholder="请输入密码"/>
    </div>
    <div class="form-group" style="width: 400px;">
        <label for="repassword" style="display:inline;width:100px">确认密码：</label>
        <input type="text" class="form-control" id="repassword" style="display:inline;width:300px;" placeholder="请再次输入密码"/>
    </div>
    <div class="form-group" style="width: 400px;">
        <label for="nickname" style="display:inline;width:100px">昵　　称：</label>
        <input type="text" class="form-control" id="nickname" name="nickname" style="display:inline;width:300px;" placeholder="请输入昵称"/>
    </div>
    <div class="form-group" style="width: 400px;">
        <label style="display:inline;width:100px">性　　别：</label>
        <select class="selectpicker show-tick form-control" id="sex" name="sex" style="display:inline;width:300px;">
            <option value="男">男</option>
            <option value="女">女</option>
        </select>
    </div>
    <div class="form-group" style="width: 400px;">
        <label for="age" style="display:inline;width:100px">年　　龄：</label>
        <input type="number" class="form-control" id="age" name="age" style="display:inline;width:300px;" value="25" />
    </div>
    <div class="form-group" style="width: 400px;">
        <label for="phonenum" style="display:inline;">手机号码：</label>
        <input type="text" class="form-control" id="phonenum" name="phonenum" style="display:inline;width:300px;" placeholder="请输入手机号码"/>
    </div>
    <div class="form-group" style="width: 400px;">
        <label for="email" style="display:inline;width:100px">电子邮箱：</label>
        <input type="text" class="form-control" id="email" name="email" style="display:inline;width:300px;" placeholder="请输入电子邮箱"/>
    </div>
    <div class="form-group" style="width: 400px;">
        <label for="qianming" style="display:inline;">个性签名：</label>
        <input type="text" class="form-control" id="qianming" name="qianming" style="display:inline;width:300px;" placeholder="请输入个性签名"/>
    </div>
    <div class="form-group" style="width: 400px;">
        <label for="tips" style="display:inline;width:100%">备　　注：</label>
        <textarea class="form-control" id="tips" name="tips" rows="3" style="display:inline;width:400px;"></textarea>
    </div>
    <button type="button" class="btn btn-primary" style="width: 150px;margin-left: 100px;" onclick="register()">注册</button><br/>
</form>

<script>
    function register() {
        var username = $("#username").val().trim();
        var password = $("#password").val().trim();
        var password1 = $("#repassword").val().trim();
        var phonenum = $("#phonenum").val().trim();
        if (username == "" || password == "" || password1 == "") {
            alert("用户名和密码不能为空！");
        } else if (password1 == password){
            $.ajax({
               url: "/findUser/"+username,
                success: function (text) {
                    if (text == 0) {
                        $("#form1").submit();
                        $.alert("注册成功！");
                    } else {
                        $.alert("已有该用户，请重新注册！");
                    }
                },
                error: function () {
                    $.alert("数据加载失败！");
                }
            });

        } else {
            alert("两次密码不一致，请重试！");
            // $("#password").val("");
            // $("#repassword").val("");
            // $("#username").val("");
        }
    }

</script>
</body>
</html>